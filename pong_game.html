<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong - Dominion Games</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1d1f27, #3a3c4b);
            color: #fff;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        h1 { margin-top: 20px; color: #ffd700; }

        canvas {
            background: black;
            display: block;
            margin: 20px auto;
            border-radius: 10px;
        }

        #score {
            font-size: 24px;
            margin: 10px;
        }

        #leaderboard {
            margin-top: 20px;
            text-align: center;
        }

        #leaderboard h2 { color: #ffd700; }
        #leaderboard ul { list-style: none; padding: 0; }
        #leaderboard li { margin: 5px 0; }

        button {
            margin: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: #ffd700;
            color: #222;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover {
            background: #e6c200;
        }
    </style>
</head>
<body>
    <h1>Pong</h1>
    <div id="score">Score: 0</div>
    <canvas id="pong" width="600" height="400"></canvas>

    <div id="leaderboard">
        <h2>Leaderboard</h2>
        <ul id="scoresList"></ul>
    </div>

    <button id="homeBtn">Home</button>

    <script>
        const canvas = document.getElementById("pong");
        const ctx = canvas.getContext("2d");

        // Paddle and ball
        const paddleWidth = 10, paddleHeight = 100, ballSize = 10;
        let player = { x: 0, y: canvas.height/2 - paddleHeight/2, dy: 0 };
        let ai = { x: canvas.width - paddleWidth, y: canvas.height/2 - paddleHeight/2, dy: 2 };
        let ball = { x: canvas.width/2, y: canvas.height/2, dx: 4, dy: 4 };
        let score = 0;

        const scoreDisplay = document.getElementById("score");

        document.addEventListener("keydown", e => {
            if(e.key === "ArrowUp") player.dy = -5;
            if(e.key === "ArrowDown") player.dy = 5;
        });
        document.addEventListener("keyup", e => {
            if(e.key === "ArrowUp" || e.key === "ArrowDown") player.dy = 0;
        });

        function drawRect(x, y, w, h, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, w, h);
        }

        function drawCircle(x, y, r, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI*2);
            ctx.closePath();
            ctx.fill();
        }

        function resetBall() {
            ball.x = canvas.width/2;
            ball.y = canvas.height/2;
            ball.dx = 4 * (Math.random() > 0.5 ? 1 : -1);
            ball.dy = 4 * (Math.random() > 0.5 ? 1 : -1);
        }

        function update() {
            // Move player paddle
            player.y += player.dy;
            if(player.y < 0) player.y = 0;
            if(player.y + paddleHeight > canvas.height) player.y = canvas.height - paddleHeight;

            // Move AI paddle
            if(ai.y + paddleHeight/2 < ball.y) ai.y += ai.dy;
            else ai.y -= ai.dy;
            if(ai.y < 0) ai.y = 0;
            if(ai.y + paddleHeight > canvas.height) ai.y = canvas.height - paddleHeight;

            // Move ball
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Ball collision top/bottom
            if(ball.y < 0 || ball.y > canvas.height - ballSize) ball.dy *= -1;

            // Ball collision paddles
            if(ball.x < player.x + paddleWidth && ball.x > player.x && ball.y + ballSize > player.y && ball.y < player.y + paddleHeight) {
                ball.dx *= -1;
                score++;
                scoreDisplay.innerText = `Score: ${score}`;
            }

            if(ball.x + ballSize > ai.x && ball.x + ballSize < ai.x + paddleWidth && ball.y + ballSize > ai.y && ball.y < ai.y + paddleHeight) {
                ball.dx *= -1;
            }

            // Missed ball
            if(ball.x < 0 || ball.x > canvas.width) {
                const name = prompt("Game Over! Enter your name for leaderboard:", "Player");
                if(name) addToLeaderboard(name, score);
                score = 0;
                scoreDisplay.innerText = `Score: 0`;
                resetBall();
            }
        }

        function draw() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            drawRect(player.x, player.y, paddleWidth, paddleHeight, "white");
            drawRect(ai.x, ai.y, paddleWidth, paddleHeight, "white");
            drawCircle(ball.x, ball.y, ballSize, "white");
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();

        // Leaderboard
        let leaderboard = [];
        const scoresList = document.getElementById("scoresList");

        function addToLeaderboard(name, score) {
            leaderboard.push({name, score});
            leaderboard.sort((a,b) => b.score - a.score);
            if(leaderboard.length > 5) leaderboard.pop();
            renderLeaderboard();
        }

        function renderLeaderboard() {
            scoresList.innerHTML = "";
            leaderboard.forEach(entry => {
                const li = document.createElement("li");
                li.textContent = `${entry.name} - ${entry.score}`;
                scoresList.appendChild(li);
            });
        }

        // Home button
        document.getElementById("homeBtn").addEventListener("click", () => {
            window.location.href = "index.html";
        });
    </script>
</body>
</html>
